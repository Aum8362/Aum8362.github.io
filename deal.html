<div class="code-panel">
  <input id="code" type="text" inputmode="numeric" maxlength="4" placeholder="****" /> 
</div>

<script>
const SECRET = "0410";
const env = document.getElementById("envelope");
const input = document.getElementById("code");

function launchConfetti(){
  const colors = ["#ff66a3","#ff99c4","#ff4d4d","#ffcc00","#ffffff"];
  for(let i=0;i<100;i++){
    const conf = document.createElement("div");
    conf.classList.add("confetti");
    conf.style.setProperty("--color",colors[Math.floor(Math.random()*colors.length)]);
    conf.style.setProperty("--x", (Math.random()*800-400)+"px"); 
    conf.style.left = (window.innerWidth/2)+"px";
    conf.style.top = "0px";
    document.body.appendChild(conf);
    setTimeout(()=>conf.remove(),3000);
  }
}

function tryOpen(){
  if(input.value === SECRET){
    env.classList.add("open");
    setTimeout(launchConfetti, 500);
  } else {
    alert("รหัสไม่ถูกต้อง 💔 ลองดูดีๆ นะคะ");
    input.value="";
    input.focus();
  }
}

input.addEventListener("keydown", e=>{
  if(e.key==="Enter") tryOpen();
});

window.onload = ()=> input.focus();
</script>
